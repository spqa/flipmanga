20161215043938
20161215051152
20161215051454
20161215073558
20161215075206
$ git clone "https://spqa:anhminhhehe7565775@github.com/spqa/flipmanga.git" "/home/www/flipmanga/production/releases/20161215081502" --branch="master" --depth="1"
git clone "https://spqa:anhminhhehe7565775@github.com/spqa/flipmanga.git" "/home/www/flipmanga/production/releases/20161215081502" --branch="master" --depth="1"
Cloning into '/home/www/flipmanga/production/releases/20161215081502'...
$ cd /home/www/flipmanga/production/releases/20161215081502
$ git submodule update --init --recursive
cd /home/www/flipmanga/production/releases/20161215081502
git submodule update --init --recursive

which: no bundle in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin)
/usr/local/bin/composer
$ cd /home/www/flipmanga/production/releases/20161215081502
$ /usr/local/bin/composer install --no-interaction --no-dev --prefer-dist
cd /home/www/flipmanga/production/releases/20161215081502
/usr/local/bin/composer install --no-interaction --no-dev --prefer-dist
Do not run Composer as root/super user! See https://getcomposer.org/root for details
Loading composer repositories with package information
Installing dependencies from lock file
  - Installing symfony/finder (v3.1.7)
    Loading from cache

  - Installing symfony/polyfill-mbstring (v1.3.0)
    Loading from cache

  - Installing symfony/var-dumper (v3.1.7)
    Loading from cache

  - Installing psr/log (1.0.2)
    Loading from cache

  - Installing maximebf/debugbar (v1.13.0)
    Loading from cache

  - Installing vlucas/phpdotenv (v2.4.0)
    Loading from cache

  - Installing symfony/translation (v3.1.7)
    Loading from cache

  - Installing symfony/routing (v3.1.7)
    Loading from cache

  - Installing symfony/process (v3.1.7)
    Loading from cache

  - Installing symfony/http-foundation (v3.1.7)
    Loading from cache

  - Installing symfony/event-dispatcher (v3.2.0)
    Loading from cache

  - Installing symfony/debug (v3.1.7)
    Loading from cache

  - Installing symfony/http-kernel (v3.1.7)
    Loading from cache

  - Installing symfony/console (v3.1.7)
    Loading from cache

  - Installing swiftmailer/swiftmailer (v5.4.4)
    Loading from cache

  - Installing paragonie/random_compat (v2.0.4)
    Loading from cache

  - Installing ramsey/uuid (3.5.2)
    Loading from cache

  - Installing nikic/php-parser (v2.1.1)
    Loading from cache

  - Installing jakub-onderka/php-console-color (0.1)
    Loading from cache

  - Installing jakub-onderka/php-console-highlighter (v0.3.2)
    Loading from cache

  - Installing dnoegel/php-xdg-base-dir (0.1)
    Loading from cache

  - Installing psy/psysh (v0.7.2)
    Loading from cache

  - Installing nesbot/carbon (1.21.0)
    Loading from cache

  - Installing mtdowling/cron-expression (v1.1.0)
    Loading from cache

  - Installing monolog/monolog (1.22.0)
    Loading from cache

  - Installing league/flysystem (1.0.32)
    Loading from cache

  - Installing symfony/polyfill-util (v1.3.0)
    Loading from cache

  - Installing symfony/polyfill-php56 (v1.3.0)
    Loading from cache

  - Installing jeremeamia/superclosure (2.2.0)
    Loading from cache

  - Installing doctrine/inflector (v1.1.0)
    Loading from cache

  - Installing classpreloader/classpreloader (3.0.0)
    Loading from cache

  - Installing laravel/framework (v5.3.26)
    Loading from cache

  - Installing barryvdh/laravel-debugbar (v2.3.0)
    Loading from cache

  - Installing symfony/class-loader (v3.2.0)
    Loading from cache

  - Installing barryvdh/reflection-docblock (v2.0.4)
    Loading from cache

  - Installing barryvdh/laravel-ide-helper (v2.2.1)
    Loading from cache

  - Installing google/recaptcha (1.1.2)
    Loading from cache

  - Installing guzzlehttp/promises (1.3.0)
    Loading from cache

  - Installing psr/http-message (1.0.1)
    Loading from cache

  - Installing guzzlehttp/psr7 (1.3.1)
    Loading from cache

  - Installing intervention/image (2.3.8)
    Loading from cache

  - Installing guzzlehttp/guzzle (6.2.2)
    Loading from cache

  - Installing league/oauth1-client (1.7.0)
    Loading from cache

  - Installing laravel/socialite (v2.0.20)
    Loading from cache

  - Installing predis/predis (v1.1.1)
    Loading from cache

  - Installing roumen/sitemap (v2.6.4)
    Loading from cache

  - Installing sunra/php-simple-html-dom-parser (v1.5.2)
    Downloading: Connecting...    Downloading: 100%         

Generating autoload files
> Illuminate\Foundation\ComposerScripts::postInstall
which: no npm in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin)
$ cd /home/www/flipmanga/production/releases/20161215081502
$ npm install
cd /home/www/flipmanga/production/releases/20161215081502
npm install
bash: npm: command not found
which: no bower in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin)
which: no bower in (/home/www/flipmanga/production/releases/20161215081502/node_modules/.bin)
$ cd /home/www/flipmanga/production/releases/20161215081502
$ chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
$ chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
$ chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
cd /home/www/flipmanga/production/releases/20161215081502
chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite
chmod: cannot access ‘/home/www/flipmanga/production/releases/20161215081502/app/database/production.sqlite’: No such file or directory
$ cd /home/www/flipmanga/production/releases/20161215081502
$ chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/storage
$ chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/storage
$ chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/storage
cd /home/www/flipmanga/production/releases/20161215081502
chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/storage
chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/storage
chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/storage

$ cd /home/www/flipmanga/production/releases/20161215081502
$ chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/public
$ chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/public
$ chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/public
cd /home/www/flipmanga/production/releases/20161215081502
chmod -R 755 /home/www/flipmanga/production/releases/20161215081502/public
chmod -R g+s /home/www/flipmanga/production/releases/20161215081502/public
chown -R nginx:nginx /home/www/flipmanga/production/releases/20161215081502/public

$ rm -rf /home/www/flipmanga/production/releases/20161215081502/storage/logs
rm -rf /home/www/flipmanga/production/releases/20161215081502/storage/logs

$ ln -s /home/www/flipmanga/production/shared/storage/logs /home/www/flipmanga/production/releases/20161215081502/storage/logs-temp
$ mv -Tf /home/www/flipmanga/production/releases/20161215081502/storage/logs-temp /home/www/flipmanga/production/releases/20161215081502/storage/logs
ln -s /home/www/flipmanga/production/shared/storage/logs /home/www/flipmanga/production/releases/20161215081502/storage/logs-temp
mv -Tf /home/www/flipmanga/production/releases/20161215081502/storage/logs-temp /home/www/flipmanga/production/releases/20161215081502/storage/logs

$ ln -s /home/www/flipmanga/production/shared/.env /home/www/flipmanga/production/releases/20161215081502/.env-temp
$ mv -Tf /home/www/flipmanga/production/releases/20161215081502/.env-temp /home/www/flipmanga/production/releases/20161215081502/.env
ln -s /home/www/flipmanga/production/shared/.env /home/www/flipmanga/production/releases/20161215081502/.env-temp
mv -Tf /home/www/flipmanga/production/releases/20161215081502/.env-temp /home/www/flipmanga/production/releases/20161215081502/.env

$ ln -s /home/www/flipmanga/production/releases/20161215081502 /home/www/flipmanga/production/current-temp
$ mv -Tf /home/www/flipmanga/production/current-temp /home/www/flipmanga/production/current
ln -s /home/www/flipmanga/production/releases/20161215081502 /home/www/flipmanga/production/current-temp
mv -Tf /home/www/flipmanga/production/current-temp /home/www/flipmanga/production/current

$ cd /home/www/flipmanga/production/releases/20161215081502
$ php artisan optimize --env="production"
cd /home/www/flipmanga/production/releases/20161215081502
php artisan optimize --env="production"
Generating optimized class loader
Compiling common classes
$ cd /home/www/flipmanga/production/releases/20161215081502
$ php artisan route:cache --env="production"
cd /home/www/flipmanga/production/releases/20161215081502
php artisan route:cache --env="production"
Route cache cleared!

                                             
  [Exception]                                
  Serialization of 'Closure' is not allowed
$ cd /home/www/flipmanga/production/releases/20161215081502
$ php artisan config:cache --env="production"
cd /home/www/flipmanga/production/releases/20161215081502
php artisan config:cache --env="production"
Configuration cache cleared!
Configuration cached successfully!
<fg=cyan>production/0/production</fg=cyan> |=> Successfully deployed release 20161215081502
$ rm -rf /home/www/flipmanga/production/releases/20161215043938
rm -rf /home/www/flipmanga/production/releases/20161215043938

<fg=cyan>production/0/production</fg=cyan> |=> Removing <info>1 release</info> from the server